

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Module http &mdash; Developer Documentation 1.3c develop (as of 31. October 2017, commit 34c17bf) documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Developer Documentation 1.3c develop (as of 31. October 2017, commit 34c17bf) documentation" href="../index.html"/>
        <link rel="up" title="Modules for use with plugins" href="modules_plugins.html"/>
        <link rel="next" title="READMEs for Modules" href="modules_readmes.html"/>
        <link rel="prev" title="Module dummy" href="module_dummy.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Developer Documentation
          

          
            
            <img src="../_static/logo_long_inverse3.png" class="logo" />
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../user_doc.html">User Documentation (German)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../config.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../config.html#structure-of-smarthomeng">Structure of SmartHomeNG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config.html#config-files-in-directory-etc">Config files in directory <strong>etc</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../config.html#smarthome-yaml">smarthome.yaml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../config.html#plugin-yaml">plugin.yaml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../config.html#logic-yaml">logic.yaml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../config.html#logging-yaml">logging.yaml</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../config.html#item-definitions-in-directory-items">Item definitions in directory <strong>items</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../config.html#logic-definitions-in-directory-logics">Logic definitions in directory <strong>logics</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../config.html#smarthomeng-start-options">SmartHomeNG start options</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../items.html">Items</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../items.html#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../items.html#item-attributes">Item Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../items.html#item-functions">Item functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../items.html#example-logic-with-uses-of-above-functions">Example logic with uses of above functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../logics.html">Logics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../logics.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logics.html#configuration-parameters">Configuration parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#watch-item">watch_item</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#cycle">cycle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#crontab">crontab</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#enabled">enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#prio">prio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#other-parameters">Other parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../logics.html#basic-structure-of-a-logic-script">Basic Structure of a logic script</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logics.html#loaded-python-modules">Loaded Python modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logics.html#available-objects-methods">Available Objects/Methods</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#logic">logic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#logic-trigger">logic.trigger()</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#trigger">trigger</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../logics.html#logger-and-sh-log">logger and sh.log</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logics.html#smarthomeng-methods-to-use">SmartHomeNG methods to use</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#sh-now-and-sh-utcnow">sh.now and sh.utcnow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#sh-sun">sh.sun</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#sh-moon">sh.moon</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../logics.html#scheduling">Scheduling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#sh-scheduler-trigger-sh-trigger">sh.scheduler.trigger() / sh.trigger()</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#sh-scheduler-change">sh.scheduler.change()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../logics.html#sh-tools-object">sh.tools object</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#sh-tools-ping">sh.tools.ping()</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#sh-tools-dewpoint">sh.tools.dewpoint()</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#sh-tools-fetch-url">sh.tools.fetch_url()</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#sh-tools-dt2ts-dt">sh.tools.dt2ts(dt)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#sh-tools-dt2js-dt">sh.tools.dt2js(dt)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#sh-tools-rel2abs-temp-hum">sh.tools.rel2abs(temp, hum)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../logics.html#accessing-items">Accessing items</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#sh-return-item-path">sh.return_item(path)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#sh-return-items">sh.return_items()</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#sh-match-items-regex">sh.match_items(regex)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#sh-find-items-configattribute">sh.find_items(configattribute)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logics.html#find-children-parentitem-configattribute">find_children(parentitem, configattribute):</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../plugins_all.html">Plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../plugins_doc/plugins_system.html">System Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plugins/backend/README.html">Backend GUI (beyond shNG v1.3)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/blockly/README.html">Blockly Logic Editor (beyond shNG v1.3)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/cli/README.html">CLI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/database/README.html">Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/datalog/README.html">DataLog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/influxdata/README.html">influxdata</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/influxdb/README.html">Influxdb</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/memlog/README.html">MemLog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/operationlog/README.html">OperationLog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/rrd/README.html">RRDTool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/rtr/README.html">RTR plug-in</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/simulation/README.html">Simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/sqlite/README.html">SQLite (for SmartVisu &lt; 2.8)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/sqlite_visu2_8/README.html">SQLite (for SmartVisu &gt;= 2.8)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/uzsu/README.html">UZSU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/visu_smartvisu/README.html">Visualisation (smartVISU support)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/visu_websocket/README.html">Visualisation (Websocket Protocol)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plugins_doc/plugins_gateway.html">Gateway Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plugins/artnet/README.html">Artnet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/dashbutton/README.html">Amazon Dashbutton Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/dmx/README.html">DMX</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/ecmd/README.html">ECMD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/elro/README.html">Elro</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/enocean/README.html">EnOcean</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/hue/README.html">Phillips HUE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/iaqstick/README.html">iAQ Stick</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/knx/README.html">KNX</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/lirc/README.html">lirc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/milight/README.html">miLight</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/mlgw/README.html">Bang &amp; Olufsen Masterlink Gateway</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/mpd/README.html">MPD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/onewire/README.html">Onewire</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/raumfeld/README.html">Raumfeld</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/rcswitch/README.html">RCswitch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/smawb/README.html">SMA-WebBox (smawb)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/snom/README.html">snom</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/sonos/README.html">Sonos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/squeezebox/README.html">Squeezebox</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/tellstick/README.html">Tellstick</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plugins_doc/plugins_interface.html">Interface Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plugins/apcups/README.html">APC UPS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/asterisk/README.html">Asterisk</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/avdevice/README.html">AV Device</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/avm/README.html">AVM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/buderus/README.html">buderus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/comfoair/README.html">ComfoAir</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/dlms/README.html">DLMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/drexelundweiss/README.html">Drexel &amp; Weiss</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/easymeter/README.html">Easymeter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/ebus/README.html">eBus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/enigma2/README.html">Enigma2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/eta_pu/README.html">ETA Pellet Unit PU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/gpio/README.html">GPIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/harmony/README.html">Harmony Hub Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/helios/README.html">Helios ECx00Pro / Vallox xx SE Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/homematic/README.html">homematic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/intercom_2n/README.html">2N-Intercom Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/kathrein/README.html">Kathrein</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/kostal/README.html">KOSTAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/logo/README.html">logo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/luxtronic2/README.html">Luxtronic2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/netio230b/README.html">NetIO230B</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/nuki/README.html">Nuki</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/nut/README.html">NUT - Network UPS Tools plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/plex/README.html">plex</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/pluggit/README.html">PLUGGIT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/roomba/README.html">Roomba</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/russound/README.html">Russound</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/sma/README.html">SMA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/sma_em/README.html">SMA-EM Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/smarttv/README.html">SmartTV</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/sml/README.html">Sml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/solarlog/README.html">Solarlog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/systemair/README.html">Systemair</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/volkszaehler/README.html">Volkszaehler Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/vr100/README.html">VR100</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/xbmc/README.html">XBMC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/xiaomi/README.html">Xiaomi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/yamaha/README.html">Yamaha</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plugins_doc/plugins_protocol.html">Protocol Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plugins/mqtt/README.html">MQTT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/mqtt_1_0/README.html">MQTT 1.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/network/README.html">Network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/wol/README.html">WakeOnLan</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/xmpp/README.html">XMPP</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plugins_doc/plugins_web.html">Web/Cloud Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plugins/alexa/README.html">Alexa</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/boxcar/README.html">Boxcar Notification Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/dwd/README.html">DWD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/ical/README.html">iCal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/join/README.html">Join</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/mail/README.html">Mail</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/mvg_live/README.html">MVG Live</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/nma/README.html">nma - Notify My Android</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/nokia_health/README.html">Nokia Health</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/odlinfo/README.html">ODLInfo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/openenergymonitor/README.html">OpenEnergyMonitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/prowl/README.html">Prowl</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/pushbullet/README.html">Pushbullet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/speech/README.html">Speech Parser</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/tankerkoenig/README.html">TankerKoenig</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/telegram/README.html">Telegram</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/traffic/README.html">Traffic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/webservices/README.html">WebServices plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/wettercom/README.html">wetter.com</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/wunderground/README.html">Wunderground</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plugins_doc/plugins_unclassified.html">Unclassified Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plugins/pushover/README.html">Pushover</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../modules.html">Modules for use with plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../modules/dummy/README.html">Module dummy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules/http/README.html">Module http</a></li>
<li class="toctree-l3"><a class="reference internal" href="module_metadata.html">Module Metadata</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools.html">Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools/backup_restore.html">tools.backup_restore</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/build_requirements.html">tools.build_requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/conf_to_yaml_converter.html">tools.conf_to_yaml_converter</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../development_plugins.html">Development of Plugins</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../dev/README.html">Plugin development guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development_plugin/plugin_in5minutes.html">How to write a Plugin in 5 min.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development_plugin/smartplugin.html">Class SmartPlugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development_plugin/plugin_metadata.html">Plugin Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development_plugin/sampleplugins.html">Sample Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../development_plugin/sampleplugin.html">Sample Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development_plugin/sampleplugin_webif.html">Sample Plugin with web interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development_plugin/sampleplugin_1_1.html">Sample Plugin (old v1.1)</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="modules_plugins.html">Modules for use with plugins</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="module_dummy.html">Module dummy</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Module http</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="modules_readmes.html">READMEs for Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../modules/dummy/README.html">Module dummy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules/http/README.html">Module http</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../development_plugin/libraries_plugins.html">Libraries for use in plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lib/connection.html">lib.connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/db.html">lib.db</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/logutils.html">lib.logutils</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/network.html">lib.network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/orb.html">lib.orb</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/scheduler.html">lib.scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/tools.html">lib.tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/utils.html">lib.utils</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/visu_smartvisu/README_for_developers.html">Visualisation plugin (smartVISU support) - for developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/visu_websocket/README_for_visu_developers.html">Visualisation plugin (Websocket Protocol) - for developers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development_core.html">Development - Core</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../core.html">Core of SmartHomeNG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core_libraries.html">Libraries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lib/config.html">lib.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/constants.html">lib.constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/daemon.html">lib.daemon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/item.html">lib.item</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/item_conversion.html">lib.item_conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/log.html">lib.log</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/logic.html">lib.logic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/metadata.html">lib.metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/module.html">lib.module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/plugin.html">lib.plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/scene.html">lib.scene</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/shyaml.html">lib.shyaml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../-----.html">&gt;———-&lt;</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/connection.html">lib.connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/db.html">lib.db</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/logutils.html">lib.logutils</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/network.html">lib.network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/orb.html">lib.orb</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/scheduler.html">lib.scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/tools.html">lib.tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/utils.html">lib.utils</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../core_modules.html">Core modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="modules_readmes.html">READMEs for Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="module_metadata.html">Module Metadata</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../release/1_3.html">Release 1.3 - August 5th, 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release/1_2.html">Release 1.2 - May 16th, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release/1_1.html">Release 1.1 - April 13th, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release/1_0.html">Release 1.0 - November 14th, 2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release/0_9.html">Release 0.9 - June 6th 2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release/0_8.html">Release 0.8 - January 31st, 2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release/0_7.html">Release 0.7 - September 27th 2012</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release/0_6.html">Release 0.6 - June 21th, 2012</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release/0_5.html">Release 0.5 - July 12th, 2012</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release/0_4.html">Release 0.4 - October 10th, 2011</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release/0_3.html">Release 0.3 - August 14th, 2011</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release/0_2.html">Release 0.2 - June 21st, 2011</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release/0_1.html">Release 0.1 - April 09th, 2011</a></li>
</ul>
</li>
</ul>

            
          
    <a href="genindex.html">Index</a>
  
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Developer Documentation</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../development_plugins.html">Development of Plugins</a> &raquo;</li>
        
          <li><a href="modules_plugins.html">Modules for use with plugins</a> &raquo;</li>
        
      <li>Module http</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/modules_doc/module_http.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-http">
<h1>Module http</h1>
<p>This module implements the possibility to write web interfaces for SmartHomeNG plugins.</p>
<span class="target" id="module-modules.http"></span><dl class="class">
<dt id="modules.http.Http">
<em class="property">class </em><code class="descclassname">modules.http.</code><code class="descname">Http</code><span class="sig-paren">(</span><em>sh</em>, <em>port=None</em>, <em>servicesport=None</em>, <em>ip=''</em>, <em>showpluginlist='True'</em>, <em>showservicelist='False'</em>, <em>showtraceback='False'</em>, <em>threads=8</em>, <em>starturl=''</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/modules/http.html#Http"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="modules.http.Http.version">
<code class="descname">version</code><em class="property"> = '1.4.4'</em></dt>
<dd></dd></dl>

<dl class="method">
<dt id="modules.http.Http.get_local_ip_address">
<code class="descname">get_local_ip_address</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/modules/http.html#Http.get_local_ip_address"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns the local ip address under which the webinterface can be reached</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">ip address</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="modules.http.Http.get_local_hostname">
<code class="descname">get_local_hostname</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/modules/http.html#Http.get_local_hostname"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns the local hostname under which the webinterface can be reached</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">fully qualified hostname</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="modules.http.Http.get_local_port">
<code class="descname">get_local_port</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/modules/http.html#Http.get_local_port"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns the local port under which the webinterface can be reached</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">port number</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="modules.http.Http.get_local_servicesport">
<code class="descname">get_local_servicesport</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/modules/http.html#Http.get_local_servicesport"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns the local port under which the webservices can be reached</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">port number</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="modules.http.Http.get_webifs_for_plugin">
<code class="descname">get_webifs_for_plugin</code><span class="sig-paren">(</span><em>pluginname</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/modules/http.html#Http.get_webifs_for_plugin"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns infos about the registered webinterfaces for a plugin (specified by shortname)</p>
<p>The information is returned as a list of dicts. One listentry for each registered webinterface.
The dict for each registered webinterface has the following structure:</p>
<dl class="docutils">
<dt>webif_dict = {‘mount’: mount, </dt>
<dd>‘pluginclass’: pluginclass, 
‘webifname’: webifname, 
‘pluginname’: pluginname, 
‘instance’: instance, 
‘conf’: conf, 
‘description’: description}</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pluginname</strong> (<em>str</em>) – Shortname of the plugin</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Tnfos about the registered webinterfaces</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list of dicts</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="modules.http.Http.get_services_for_plugin">
<code class="descname">get_services_for_plugin</code><span class="sig-paren">(</span><em>pluginname</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/modules/http.html#Http.get_services_for_plugin"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns infos about the registered webservices for a plugin (specified by shortname)</p>
<p>The information is returned as a list of dicts. One listentry for each registered webservice.
The dict for each registered webinterface has the following structure:</p>
<dl class="docutils">
<dt>service_dict = {‘mount’: mount, </dt>
<dd>‘pluginclass’: pluginclass, 
‘servicename’: servicename, 
‘pluginname’: pluginname, 
‘instance’: instance, 
‘conf’: conf, 
‘description’: description}</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pluginname</strong> (<em>str</em>) – Shortname of the plugin</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Tnfos about the registered webservices</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list of dicts</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="modules.http.Http.register_webif">
<code class="descname">register_webif</code><span class="sig-paren">(</span><em>app</em>, <em>pluginname</em>, <em>conf</em>, <em>pluginclass=''</em>, <em>instance=''</em>, <em>description=''</em>, <em>webifname=''</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/modules/http.html#Http.register_webif"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Register an application for CherryPy</p>
<p>This method is called by a plugin to register a webinterface</p>
<p>It should be called like this:</p>
<blockquote>
<div><dl class="docutils">
<dt>self.mod_http.register_webif(WebInterface( … ), </dt>
<dd>self.get_shortname(), 
config, 
self.get_classname(), self.get_instance_name(),
description,
webifname)</dd>
</dl>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>app</strong> (<em>object</em>) – Instance of the application object</li>
<li><strong>pluginname</strong> (<em>str</em>) – Mount point for the application</li>
<li><strong>conf</strong> (<em>dict</em>) – Cherrypy application configuration dictionary</li>
<li><strong>pluginclass</strong> (<em>str</em>) – Name of the plugin’s class</li>
<li><strong>instance</strong> – Instance of the plugin (if multi-instance)</li>
<li><strong>description</strong> (<em>str</em>) – Description of the functionallity of the webif. If left empty, a generic description will be generated</li>
<li><strong>webifname</strong> (<em>str</em>) – Name of the webinterface. If left empty, the pluginname is used</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="modules.http.Http.register_service">
<code class="descname">register_service</code><span class="sig-paren">(</span><em>app</em>, <em>pluginname</em>, <em>conf</em>, <em>pluginclass=''</em>, <em>instance=''</em>, <em>description=''</em>, <em>servicename=''</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/modules/http.html#Http.register_service"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Register a service for CherryPy</p>
<p>This method is called by a plugin to register a webservice.</p>
<p>It should be called like this:</p>
<blockquote>
<div><dl class="docutils">
<dt>self.mod_http.register_service(Webservice( … ), </dt>
<dd>self.get_shortname(), 
config, 
self.get_classname(), self.get_instance_name(),
description,
servicename)</dd>
</dl>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>app</strong> (<em>object</em>) – Instance of the service object</li>
<li><strong>pluginname</strong> (<em>str</em>) – Mount point for the service</li>
<li><strong>conf</strong> (<em>dict</em>) – Cherrypy application configuration dictionary</li>
<li><strong>pluginclass</strong> (<em>str</em>) – Name of the plugin’s class</li>
<li><strong>instance</strong> – Instance of the plugin (if multi-instance)</li>
<li><strong>description</strong> (<em>str</em>) – Description of the functionallity of the webif. If left empty, a generic description will be generated</li>
<li><strong>servicename</strong> (<em>str</em>) – Name of the service. I if left empty, the pluginname is used</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="modules.http.Http.start">
<code class="descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/modules/http.html#Http.start"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>If the module needs to startup threads or uses python modules that create threads,
put thread creation code or the module startup code here.</p>
<p>Otherwise don’t enter code here</p>
</dd></dl>

<dl class="method">
<dt id="modules.http.Http.stop">
<code class="descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/modules/http.html#Http.stop"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>If the module has started threads or uses python modules that created threads,
put cleanup code here.</p>
<p>Otherwise don’t enter code here</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="modules.http.ModuleApp">
<em class="property">class </em><code class="descclassname">modules.http.</code><code class="descname">ModuleApp</code><span class="sig-paren">(</span><em>mod</em>, <em>starturl</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/modules/http.html#ModuleApp"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>The module http implements it’s own webinterface.
This WebApp implements the entrypoint for the webinterface of the module ‘http’.</p>
<p>Depenting on the configuration of the ‘http’ module, it redirects to the webinterface of a 
specified plugin or it redirects to a chooser which allows the start of the differnt webinterfaces of the plugins.</p>
<p>This webinterface is mounted to CherryPy as ‘/’</p>
<dl class="method">
<dt id="modules.http.ModuleApp.index">
<code class="descname">index</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/modules/http.html#ModuleApp.index"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>This method is exposed to CherryPy. It implements the page ‘index.html’</p>
</dd></dl>

</dd></dl>

<p>A formatted version of the sample README.md can be found here:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/http/README.html">Module http</a></li>
</ul>
</div>
<p>A raw version of the README.md for copy and paste can be found below the metadata file.</p>
<p>The meta data file:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">module.yaml</span></div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Metadata for the plugin</span>
<span class="n">module</span><span class="p">:</span>
    <span class="c1"># Global plugin attributes</span>
    <span class="n">classname</span><span class="p">:</span> <span class="n">Http</span>
    <span class="n">version</span><span class="p">:</span> <span class="mf">1.4</span><span class="o">.</span><span class="mi">4</span>
    <span class="n">sh_minversion</span><span class="p">:</span> <span class="mf">1.3</span><span class="n">a</span>
<span class="c1">#   sh_maxversion:              # maximum shNG version to use this plugin (leave empty if latest)</span>
    <span class="n">description</span><span class="p">:</span>
        <span class="n">de</span><span class="p">:</span> <span class="s1">&#39;Modul zur Implementierung von Backend-Webinterfaces für Plugins&#39;</span>
        <span class="n">en</span><span class="p">:</span> <span class="s1">&#39;Module for implementing a backend-webinterface for plugins&#39;</span>

<span class="n">parameters</span><span class="p">:</span>
    <span class="c1"># Definition of parameters to be configured in etc/module.yaml</span>
    <span class="n">port</span><span class="p">:</span>
        <span class="nb">type</span><span class="p">:</span> <span class="nb">int</span>
        <span class="n">default</span><span class="p">:</span> <span class="mi">8383</span>
        <span class="n">description</span><span class="p">:</span>
            <span class="n">de</span><span class="p">:</span> <span class="n">Portnummer</span> <span class="n">für</span> <span class="n">die</span> <span class="n">Webinterfaces</span>
            <span class="n">en</span><span class="p">:</span> <span class="n">Port</span> <span class="n">number</span> <span class="k">for</span> <span class="n">the</span> <span class="n">web</span> <span class="n">interfaces</span>
    <span class="n">servicesport</span><span class="p">:</span>
        <span class="nb">type</span><span class="p">:</span> <span class="nb">int</span>
        <span class="n">default</span><span class="p">:</span> <span class="mi">8384</span>
    <span class="n">showpluginlist</span><span class="p">:</span>
        <span class="nb">type</span><span class="p">:</span> <span class="nb">bool</span>
        <span class="n">default</span><span class="p">:</span> <span class="kc">True</span>
    <span class="n">showservicelist</span><span class="p">:</span>
        <span class="nb">type</span><span class="p">:</span> <span class="nb">bool</span>
        <span class="n">default</span><span class="p">:</span> <span class="kc">False</span>
    <span class="n">starturl</span><span class="p">:</span>
        <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>
        <span class="n">default</span><span class="p">:</span> 
    <span class="n">threads</span><span class="p">:</span>
        <span class="nb">type</span><span class="p">:</span> <span class="nb">int</span>
        <span class="n">default</span><span class="p">:</span> <span class="mi">8</span>
        <span class="n">valid_list</span><span class="p">:</span>
          <span class="o">-</span> <span class="mi">2</span>
          <span class="o">-</span> <span class="mi">3</span>
          <span class="o">-</span> <span class="mi">4</span>
          <span class="o">-</span> <span class="mi">5</span>
          <span class="o">-</span> <span class="mi">6</span>
          <span class="o">-</span> <span class="mi">7</span>
          <span class="o">-</span> <span class="mi">8</span>
    <span class="n">showtraceback</span><span class="p">:</span>
        <span class="nb">type</span><span class="p">:</span> <span class="nb">bool</span>
        <span class="n">default</span><span class="p">:</span> <span class="kc">False</span>
        
<span class="c1">#    test1:</span>
<span class="c1">#        Test auf einen ungültigen Default Wert (-1 bei Datentyp positive Integer): es wird der default für pint (0) verwendet</span>
<span class="c1">#        type: pint</span>
<span class="c1">#        default: -1</span>

<span class="c1">#    test2:</span>
<span class="c1">#        Test auf einen ungültigen Default Wert (8 ist nicht Element der Liste): es wird der 1. Listeneintrag verwendet</span>
<span class="c1">#        type: int</span>
<span class="c1">#        default: 8</span>
<span class="c1">#        valid_list:</span>
<span class="c1">#          - 4</span>
<span class="c1">#          - 2</span>
<span class="c1">#          - 3</span>
<span class="c1">#          - 5</span>
<span class="c1">#          - 6</span>
        
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">README.md</span></div>
<div class="highlight-default"><div class="highlight"><pre><span></span># Module http

This module allows plugins to implement a web interface. The API is described below. The first plugin to utilize this API is teh backend plugin.

&gt; Note: To write a plugin that utilizes this module, you have to be familiar with CherryPy. 


## Requirements

This module is running under SmmartHomeNG versions beyond v1.3. It requires Python &gt;= 3.4 as well as the lib **cherrypy**. You can install the libraries (python modules) with:

```
(sudo apt-get install python-cherrypy)
sudo pip3 install cherrypy
```

And please pay attention that the lib(s) are installed for Python3 and not an older Python 2.7 that is probably installed on your system. Be carefull to use `pip3` and nor `pip`.

&gt; Note: This module needs the module handling in SmartHomeNG to be activated. Make sure, that `use_modules`in `etc/smarthome.yaml` is **not** set to False!


## Configuration

### etc/module.yaml


```yaml
# etc/module.yaml
http:
    class_name: http
#    port: 8383
#    servicesport: 8384
#    showpluginlist: False
    showservicelist: True
#    starturl: backend
#    threads: 8
#    showtraceback: True

```

#### port (optional)
The port on which the html interface listens. By default port **`8383`** is used.

#### servicesport (optional)
The port on which the html interface listens. By default port **`8384`** is used.

#### showpluginlist
If set to `False` no list of pluins with web interface is shown under `smarthomeNG.local:8383/plugins`. By default, **showpluginlist** is **True**.

#### showservicelist
If set to `True` a list of webservices is shown under `smarthomeNG.local:8384/services`. By default, ** showservicelist** is **False**.

#### starturl (optional)
The name of the plugin that is started when calling url `smarthomeNG.local:8383` without further detailing that url. If you want to startup the **backend** plugin for example: You set `starturl: backend`. That results in a redirect which redirects `smarthomeNG.local:8383` to `smarthomeNG.local:8383/backend`. 

if `starturl` is not specified or point to an url that does not exist, a redirect to `smarthomeNG.local:8383/plugins` will take place (if ** showpluginlist** is **True**). It points to a page that lists all plugins that have registered a html interface and allows you to start those interfaces.

&gt; Note: If you have redirected to a specific plugin, you can always get to the page with the list of all plugins that have registered a html interface, by entering the url `smarthomeNG.local:8383/plugins`.

####  threads (optional)
Number of worker threads to start by cherrypy (default 8, which may be too much for slow CPUs)

#### showtraceback
If set to **True, error-pages (except for error 404) will show the Python traceback for that error.


## API of module http

### Test if module http is loaded

`http` is a loadlable module. Therefore there is no guarantiee that it is present in every system. Before you can use this module, you have to make sure ist is loaded. You can do it by calling a method of the main smarthome object. Do it like this:

```
self.classname = self.__class__.__name__

try:
    self.mod_http = self._sh.get_module(&#39;http&#39;)
except:
    self.mod_http = None
    
if self.mod_http == None:
    # Do what is necessary if you can&#39;t start a web interface
    # for your plugin. For example:
    self.logger.error(&#39;{}: Module &#39;&#39;http&#39;&#39; not loaded - Abort loading of plugin {0}&#39;.format(self.classname))
    return
```

### Registering a web application/interface

For registering a web interface (or a web application in CherryPy terminology) you first have to define an application configuration for cherrypy.

&gt; Note: Be careful not to include a CherryPy ``global`` configuration.

An application configuration for CherryPy can look like this;

```
app_config = {
    &#39;/&#39;: {
        &#39;tools.staticdir.root&#39;: current_dir,
        &#39;tools.auth_basic.on&#39;: self._basic_auth,
        &#39;tools.auth_basic.realm&#39;: &#39;earth&#39;,
        &#39;tools.auth_basic.checkpassword&#39;: self.validate_password,
    },
    &#39;/static&#39;: {
        &#39;tools.staticdir.on&#39;: True,
        &#39;tools.staticdir.dir&#39;: os.path.join(current_dir, &#39;static&#39;)
    }
}
```

&gt; Note: The `tools.auth_basic`entries in this example are for implementing a basic logon security. If you don`t want/need login security, delete those enties.

For registering a web application/interface you have to call the `register_app` of module `http`:

```
register_app(app_object, 
             appname, 
             app_config, 
             pluginclass, instance,
             description)
```

For example:

```
appname = &#39;backend&#39;    # Name of the plugin
pluginclass = self.__class__.__name__
instance = self.get_instance_name()

self.mod_http.register_app(Backend(self, self.updates_allowed, language, self.developer_mode, self.pypi_timeout), 
                          appname, 
                          app_config, 
                          pluginclass, instance,
                          description=&#39;Administration interface for SmartHomeNG&#39;)
```

## Implementing a web interface for you plugin

For details about implementing a web interface (CherryPy application) for your plugin, refer to the CherryPy documentation.

The documentation will tell you how to expose parts of your python code to be availabe through CheryPy`s http-server.

### Methods for implementing a web interface

#### get_local_ip_address()
Returns the ip address under which the web interface is listening.

#### get_local_hostname()
Returns the hostname (with domain) under which the web interface is listening.

#### get_local_port()
Returns the port under which the implemented web interfaces can be reached.

#### get_local_servicesport( ... )
Returns the port under which the implemented webservices can be reached.

#### register_app()

##### Parameters
- **app**	- Instance of the CherryPy App
- **pluginname**  - Standard would be: Shortname of the plugin (name of the plugin&#39;s directory)
- **conf**  - dict with CherryPy App-Config
- **pluginclass**  - Class of the plugin
- **instance**   - Optional: Instance of the plugin (if multi-instance)
- **description**  - Optional: Description to be shown on page with plugin-list

#### register_service( ... )

##### Parameters
- **service**	- Instance of the CherryPy App
- **servicename**  - Standard would be: Shortname of the plugin (name of the plugin&#39;s directory)
- **conf**  - dict with CherryPy App-Config
- **pluginclass**  - Class of the plugin
- **instance**   - Optional: Instance of the plugin (if multi-instance)
- **description**  - Optional: Description to be shown on page with services-list

</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="modules_readmes.html" class="btn btn-neutral float-right" title="READMEs for Modules" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="module_dummy.html" class="btn btn-neutral" title="Module dummy" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2017 SmartHomeNG Team, based on smarthome.py © 2011-2014 Marcus Popp.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.3c develop (as of 31. October 2017, commit 34c17bf)',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>